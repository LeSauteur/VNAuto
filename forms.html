Добрый день!

Вот обновлённый код для `forms.html`, включающий интеграцию с Telegram и удалённым хранилищем, как описано в документе. Я подставил ваши реальные данные для Telegram.

**ВАЖНО:**
1.  **Безопасность:** Размещение токена бота прямо в HTML-коде **не является безопасным**. Любой посетитель сайта может открыть исходный код и увидеть его. Использование токена таким образом даёт доступ к вашему боту (читать/писать сообщения, управлять им и т.д.). Рассмотрите возможность использования промежуточного сервера (даже простого Google Apps Script, как предлагалось в документе) для выполнения запроса к Telegram API, чтобы токен не был открыт на клиентской стороне. Тем не менее, согласно вашему запросу, он вставлен в код.
2.  **Удалённое хранилище:** Я оставил плейсхолдер `{{remote_api_endpoint}}`. Вам нужно будет заменить его на реальный URL вашего удалённого API (например, Google Apps Script Web App), когда он будет готов. Если вы не будете использовать удалённое хранилище, вы можете удалить соответствующую строку `await sendToRemoteStorage(requestData);`.

```html
<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Онлайн-запись - Автосервис VN-MASTERS</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
/* :root переменные для цветов */
        :root {
            /* Основные цвета */
            --primary-color: rgb(230, 10, 15);
            --primary-dark: #c00a0f;
            --secondary-color: rgb(240, 130, 100);
            
            /* Оттенки серого */
            --gray-90: rgb(110, 110, 110);
            --gray-80: rgb(158, 158, 158);
            --gray-60: rgb(200, 200, 200);
            --gray-40: rgb(218, 218, 218);
            --gray-20: rgb(236, 236, 236);
            
            /* Общие переменные */
            --container-width: 1200px;
            --border-radius: 8px;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }
        
        /* Сброс стилей */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        /* Общие стили */
        body {
            font-family: 'Open Sans', Arial, sans-serif;
            color: var(--gray-90);
            background-color: white;
            line-height: 1.6;
            overflow-x: hidden;
        }
        
        .container {
            max-width: var(--container-width);
            margin: 0 auto;
            padding: 0 20px;
        }
        
        img {
            max-width: 100%;
        }
        
        /* Шапка сайта */
        .header {
            background-color: white;
            border-bottom: 1px solid var(--gray-40);
            padding: 15px 0;
            position: relative;
            box-shadow: var(--shadow);
            z-index: 1000;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: var(--primary-color);
        }
        
        /* Верхняя строка с логотипом и цитатами */
        .top-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .logo-section {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }
        
        /* Стили для кликабельного баннера-логотипа */
        .logo-banner {
            display: block;
            max-height: 80px;
            width: auto;
            transition: var(--transition);
            border-radius: var(--border-radius);
        }
        
        .logo-banner:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(230, 10, 15, 0.3);
        }
        
        .contacts {
            text-align: right;
        }
        
        .phone-list {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        /* Стили для строки с цитатами */
        .quotes-bar {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: white;
            padding: 10px 20px;
            border-radius: var(--border-radius);
            box-shadow: 0 2px 8px rgba(230, 10, 15, 0.3);
            text-align: center;
            max-width: 600px;
            flex-grow: 1;
            margin: 0 20px;
        }

        .quote-text {
            font-size: 16px;
            font-weight: 600;
            font-style: italic;
        }

        .phone {
            font-size: 18px;
            font-weight: 700;
            color: var(--primary-color);
            text-decoration: none;
            display: block;
            transition: var(--transition);
            line-height: 1.3;
        }
        
        .phone:hover {
            color: var(--primary-dark);
        }
        
        /* Полуовальные кнопки */
        .btn {
            display: inline-block;
            padding: 10px 20px;
            background: var(--primary-color);
            color: white;
            text-decoration: none;
            border-radius: 25px;
            font-size: 14px;
            font-weight: 600;
            transition: var(--transition);
            border: none;
            cursor: pointer;
            text-align: center;
        }
        
        .btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(230, 10, 15, 0.3);
        }
        
        .btn.secondary {
            background: #0088cc;
        }
        
        .btn.secondary:hover {
            background: #0077b3;
            box-shadow: 0 4px 8px rgba(0, 136, 204, 0.3);
        }
        
        .btn:disabled {
            background: var(--gray-60);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .social-links {
            display: flex;
            gap: 10px;
            margin-left: 20px;
        }
        
        .nav-container {
            border-top: 1px solid var(--gray-40);
            padding-top: 15px;
        }
        
        .main-nav {
            display: flex;
            gap: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .nav-item {
            position: relative;
            cursor: pointer;
            padding: 8px 0;
            font-size: 16px;
            font-weight: 600;
            color: var(--gray-90);
            transition: var(--transition);
            text-decoration: none;
            position: relative;
        }
        
        .nav-item:hover {
            color: var(--primary-color);
        }
        
        .nav-item.active, 
        .nav-item:hover {
            color: var(--primary-color);
        }
        
        .nav-item.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 100%;
            height: 2px;
            background: var(--primary-color);
        }
        
        /* Основной контент */
        .main-content {
            padding: 40px 0;
            min-height: 70vh;
        }
        
        .section {
            background: white;
            border-radius: var(--border-radius);
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
        }
        
        .section-title {
            color: var(--primary-color);
            font-size: 28px;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--gray-40);
            position: relative;
        }
        
        .section-title::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 60px;
            height: 2px;
            background: var(--primary-color);
        }
        
        /* Стили формы */
        .form-container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--gray-90);
        }
        
        .form-label.required::after {
            content: ' *';
            color: var(--primary-color);
        }
        
        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--gray-40);
            border-radius: var(--border-radius);
            font-size: 16px;
            transition: var(--transition);
            background: white;
        }
        
        .form-input:focus, .form-select:focus, .form-textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(230, 10, 15, 0.1);
        }
        
        .form-textarea {
            resize: vertical;
            min-height: 120px;
        }
        
        .form-submit {
            text-align: center;
            margin-top: 30px;
        }
        
        .submit-btn {
            padding: 15px 40px;
            font-size: 18px;
            font-weight: 700;
        }
        
        /* Сообщения */
        .alert {
            padding: 15px;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
            display: none;
        }
        
        .alert-success {
            background: rgba(40, 167, 69, 0.1);
            border: 1px solid rgba(40, 167, 69, 0.2);
            color: #28a745;
        }
        
        .alert-error {
            background: rgba(220, 53, 69, 0.1);
            border: 1px solid rgba(220, 53, 69, 0.2);
            color: #dc3545;
        }
        
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
            margin-right: 10px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Подвал сайта */
        footer {
            background: white;
            color: var(--gray-90);
            padding: 50px 0 30px 0;
            border-top: 1px solid var(--gray-40);
            margin-top: 40px;
        }
        
        .footer-content {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 30px;
        }
        
        .footer-col {
            flex: 1;
            min-width: 250px;
        }
        
        .footer-logo {
            margin-bottom: 15px;
        }
        
        .footer-title {
            color: var(--primary-color);
            font-size: 18px;
            font-weight: 700;
            margin: 0 0 20px 0;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .footer-links {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .footer-links a {
            color: var(--gray-90);
            text-decoration: none;
            font-size: 16px;
            font-weight: 500;
            transition: var(--transition);
            display: inline-block;
        }
        
        .footer-links a:hover {
            color: var(--primary-color);
            transform: translateX(5px);
        }
        
        .copyright {
            font-size: 14px;
            color: var(--gray-80);
            text-align: center;
            padding-top: 20px;
            margin-top: 30px;
            border-top: 1px solid var(--gray-40);
        }
        
        /* Адаптивность */
        @media (max-width: 992px) {
            .footer-content {
                flex-direction: column;
            }
        }
        
        @media (max-width: 768px) {
            .top-row {
                flex-direction: column;
                text-align: center;
            }
            
            .quotes-bar {
                margin: 15px 0;
                max-width: 100%;
            }
            
            .contacts {
                margin: 15px 0;
                text-align: center;
            }
            
            .phone-list {
                align-items: center;
            }
            
            .social-links {
                justify-content: center;
                margin-left: 0;
            }
            
            .main-nav {
                gap: 15px;
                flex-direction: column;
                align-items: flex-start;
            }
            
            .nav-item {
                font-size: 18px;
                width: 100%;
            }
            
            .logo-banner {
                max-height: 60px;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 480px) {
            .section {
                padding: 20px;
            }
            
            .logo-banner {
                max-height: 50px;
            }
            
            .submit-btn {
                width: 100%;
            }
        }
</style>
</head>
<body>
<!-- Шапка сайта (остается без изменений) -->
<header class="header">
  <div class="container">
    <!-- Верхняя строка -->
    <div class="top-row">
      <div class="logo-section">
        <a href="index.html" class="logo-banner-link">
          <img src="https://s3.radikal.cloud/2025/11/27/unnamedcef392b5bea91fce.jpg"
               alt="VN-MASTERS Профессиональный автосервис" class="logo-banner">
        </a>
      </div>
      <div class="quotes-bar">
        <div class="quote-text">Запись на обслуживание онлайн</div>
      </div>
      <div class="contacts">
        <div class="phone-list">
          <a href="tel:+78632600345" class="phone">+7 (863) 260-03-45</a>
          <a href="tel:+79045057390" class="phone">+7 (904) 505-73-90</a>
          <a href="tel:+79185900199" class="phone">+7 (918) 590-01-99</a>
        </div>
      </div>
    </div>
    <!-- Навигация -->
    <div class="nav-container">
      <nav class="main-nav">
        <a href="index.html" class="nav-item">Главная</a>
        <a href="index.html#services" class="nav-item">Услуги</a>
        <a href="index.html#parts" class="nav-item">Запчасти</a>
        <a href="index.html#contact" class="nav-item">Контакты</a>
        <a href="forms.html" class="nav-item active">Онлайн-запись</a>
        <a href="admin.html" class="nav-item">Администраторам</a>
      </nav>
    </div>
  </div>
</header>

<!-- Основной контент -->
<main class="main-content">
  <div class="container">
    <section class="section">
      <h2 class="section-title">Онлайн-запись на обслуживание</h2>
      <p>Заполните форму ниже и мы свяжемся с вами для подтверждения записи и уточнения деталей</p>

      <div class="form-container">
        <!-- Сообщения об успехе/ошибке -->
        <div class="alert alert-success" id="successMessage" style="display: none;">
          <i class="fas fa-check-circle"></i> Ваша заявка успешно отправлена! Мы свяжемся с вами в ближайшее время.
        </div>

        <div class="alert alert-error" id="errorMessage" style="display: none;">
          <i class="fas fa-exclamation-circle"></i> Произошла ошибка при отправке заявки. Пожалуйста, попробуйте позже или позвоните нам.
        </div>

        <!-- ФОРМА FORMSPREE -->
        <form id="bookingForm" class="form">
          <!-- Скрытые поля для настройки Formspree (если используется) -->
          <input type="hidden" name="_language" value="ru">
          <input type="hidden" name="_subject" value="Новая заявка с сайта VN-MASTERS">
          <input type="hidden" name="_format" value="plain">
          <!-- Анти-спам поле (пользователи его не увидят) -->
          <input type="text" name="_gotcha" style="display:none">

          <div class="form-row">
            <div class="form-group">
              <label for="name" class="form-label required">Ваше имя</label>
              <input type="text" id="name" name="Имя_клиента" data-field="name" class="form-input" required placeholder="Иван Иванов" autocomplete="name">
            </div>

            <div class="form-group">
              <label for="phone" class="form-label required">Телефон</label>
              <input type="tel" id="phone" name="Телефон" data-field="phone" class="form-input" required placeholder="+7 (999) 123-45-67" autocomplete="tel">
            </div>
          </div>

          <div class="form-group">
            <label for="email" class="form-label">Email (необязательно)</label>
            <input type="email" id="email" name="Email" data-field="email" class="form-input" placeholder="example@mail.ru" autocomplete="email">
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="carBrand" class="form-label required">Марка автомобиля</label>
              <input type="text" id="carBrand" name="Марка_автомобиля" data-field="carBrand" class="form-input" required placeholder="Toyota">
            </div>

            <div class="form-group">
              <label for="carModel" class="form-label required">Модель автомобиля</label>
              <input type="text" id="carModel" name="Модель_автомобиля" data-field="carModel" class="form-input" required placeholder="Camry">
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="year" class="form-label required">Год выпуска</label>
              <input type="number" id="year" name="Год_выпуска" data-field="carYear" class="form-input" required min="1990" max="2025" placeholder="2018">
            </div>

            <div class="form-group">
              <label for="service" class="form-label required">Услуга</label>
              <select id="service" name="Услуга" data-field="serviceType" class="form-select" required>
                <option value="">-- Выберите услугу --</option>
                <option value="Техническое обслуживание">Техническое обслуживание</option>
                <option value="Ремонт двигателя">Ремонт двигателя</option>
                <option value="Ремонт КПП">Ремонт КПП</option>
                <option value="Шиномонтаж">Шиномонтаж</option>
                <option value="Автоэлектрика">Автоэлектрика</option>
                <option value="Кузовные работы">Кузовные работы</option>
                <option value="Диагностика">Диагностика</option>
                <option value="Другое">Другое</option>
              </select>
            </div>
          </div>

          <div class="form-row">
             <div class="form-group">
              <label for="date" class="form-label">Желаемая дата визита</label>
              <input type="date" id="date" name="Дата_визита" data-field="preferredDate" class="form-input">
            </div>
            <div class="form-group">
              <label for="time" class="form-label">Желаемое время визита</label>
              <input type="time" id="time" name="Время_визита" data-field="preferredTime" class="form-input">
            </div>
          </div>

          <div class="form-group">
            <label for="problem" class="form-label">Описание проблемы / дополнительные пожелания</label>
            <textarea id="problem" name="Описание_проблемы" data-field="comment" class="form-textarea" placeholder="Опишите проблему с автомобилем или укажите дополнительные пожелания..."></textarea>
          </div>

          <div class="form-submit">
            <button type="submit" class="btn submit-btn" id="submitBtn">
              Отправить заявку
            </button>
          </div>
        </form>
      </div>
    </section>
  </div>
</main>

<!-- Подвал сайта (остается без изменений) -->
<footer>
  <div class="container">
    <div class="footer-content">
      <div class="footer-col">
        <div class="footer-logo">
          <a href="index.html">
            <img src="https://s3.radikal.cloud/2025/11/27/unnamedcef392b5bea91fce.jpg"
                 alt="VN-MASTERS Автосервис" style="max-height: 60px; width: auto;">
          </a>
        </div>
        <p>Профессиональный ремонт и обслуживание автомобилей всех марок. Мы работаем, чтобы вы могли ездить с удовольствием и уверенностью.</p>
      </div>
      <div class="footer-col">
        <h4 class="footer-title">Услуги</h4>
        <div class="footer-links">
          <a href="index.html#services">Техническое обслуживание</a>
          <a href="index.html#services">Шиномонтаж</a>
          <a href="index.html#services">Ремонт двигателя</a>
          <a href="index.html#services">Ремонт КПП</a>
          <a href="index.html#services">Автоэлектрика</a>
        </div>
      </div>
      <div class="footer-col">
        <h4 class="footer-title">Запчасти</h4>
        <div class="footer-links">
          <a href="index.html#parts">Лампы для фар</a>
          <a href="index.html#parts">Стеклоомывающая жидкость</a>
          <a href="index.html#parts">Моторные масла</a>
          <a href="index.html#parts">Фильтры</a>
          <a href="index.html#parts">Тормозные колодки</a>
        </div>
      </div>
      <div class="footer-col">
        <h4 class="footer-title">Контакты</h4>
        <div class="footer-links">
          <a href="tel:+78632600345">+7 (863) 260-03-45</a>
          <a href="tel:+79045057390">+7 (904) 505-73-90</a>
          <a href="tel:+79185900199">+7 (918) 590-01-99</a>
          <a href="index.html#contact">ул. Стартовая 1/1, Ростов-на-Дону</a>
          <a href="index.html#contact">Ежедневно 8:00-20:00</a>
          <a href="https://yandex.ru/maps/org/vn_masters/42750637752/" target="_blank">Яндекс Карты</a>
          <a href="https://2gis.ru/rostov-on-don/firm/70000001095146498" target="_blank">2ГИС</a>
        </div>
      </div>
    </div>
    <div class="copyright">
      <p>&copy; 2025 Автосервис "VN-MASTERS". Все права защищены.</p>
    </div>
  </div>
</footer>

<script>
// Константы интеграций
const TELEGRAM_BOT_TOKEN = '8520593130:AAHREPonOG49ekGEFkjqNWg5EgFLcRy4BKY'; // Ваш токен бота
const TELEGRAM_CHAT_ID = '833755025'; // Ваш ID
const REMOTE_API_ENDPOINT = '{{remote_api_endpoint}}'; // Замените на реальный URL вашего API или удалите строку

document.addEventListener('DOMContentLoaded', function() {
  const form = document.getElementById('bookingForm');
  const successMessage = document.getElementById('successMessage');
  const errorMessage = document.getElementById('errorMessage');
  const submitBtn = document.getElementById('submitBtn');
  const dateField = document.getElementById('date');
  const timeField = document.getElementById('time');
  const phoneInput = document.getElementById('phone');

  // Устанавливаем минимальную дату (завтра) и дату по умолчанию (через 2 дня)
  if (dateField) {
    const today = new Date();
    const tomorrow = new Date(today);
    tomorrow.setDate(tomorrow.getDate() + 1);
    dateField.min = tomorrow.toISOString().split('T')[0];

    const defaultDate = new Date(today);
    defaultDate.setDate(defaultDate.getDate() + 2);
    dateField.value = defaultDate.toISOString().split('T')[0];
  }

  // Устанавливаем время по умолчанию (9:00)
  if (timeField) {
      timeField.value = '09:00';
  }

  // Маска для телефона
  if (phoneInput) {
    phoneInput.addEventListener('input', function(e) {
      let value = e.target.value.replace(/\D/g, '');
      if (value.length > 0) {
        if (value[0] === '7' || value[0] === '8') {
          value = value.substring(1);
        }
        let formatted = '+7 ';
        if (value.length > 0) {
          formatted += '(' + value.substring(0, 3);
        }
        if (value.length >= 4) {
          formatted += ') ' + value.substring(3, 6);
        }
        if (value.length >= 7) {
          formatted += '-' + value.substring(6, 8);
        }
        if (value.length >= 9) {
          formatted += '-' + value.substring(8, 10);
        }
        e.target.value = formatted;
      }
    });
  }

  // Функция сбора данных формы
  function collectFormData() {
    const now = new Date();
    const name = document.getElementById('name').value;
    const phone = document.getElementById('phone').value;
    const email = document.getElementById('email').value;
    const carBrand = document.getElementById('carBrand').value;
    const carModel = document.getElementById('carModel').value;
    const carYear = document.getElementById('year').value;
    const serviceType = document.getElementById('service').value;
    const preferredDate = document.getElementById('date').value;
    const preferredTime = document.getElementById('time').value;
    const comment = document.getElementById('problem').value;

    return {
      id: generateRequestId(),
      created_at: now.toISOString(),
      name: name.trim(),
      phone: phone.trim(),
      email: email.trim(),
      carBrand: carBrand.trim(),
      carModel: carModel.trim(),
      carYear: carYear.trim(),
      serviceType: serviceType.trim(),
      preferredDate,
      preferredTime,
      comment: comment.trim(),
      source: 'site-form',
      status: 'Новый'
    };
  }

  // Функция генерации ID заявки
  function generateRequestId() {
    const ts = Date.now();
    const rand = Math.floor(Math.random() * 100000);
    return 'req_' + ts + '_' + rand;
  }

  // Функция формирования текста для Telegram
  function buildTelegramMessage(data) {
    return [
      'Новая заявка с сайта VN-MASTERS',
      'ID: ' + data.id,
      'Имя: ' + (data.name || '-'),
      'Телефон: ' + (data.phone || '-'),
      'Email: ' + (data.email || '-'),
      'Авто: ' + [data.carBrand, data.carModel, data.carYear].filter(Boolean).join(' '),
      'Услуга: ' + (data.serviceType || '-'),
      'Желаемая дата: ' + (data.preferredDate || '-') + ' ' + (data.preferredTime || ''),
      'Комментарий: ' + (data.comment || '-')
    ].join('\n');
  }

  // Функция отправки в Telegram
  async function sendToTelegram(data) {
    const message = buildTelegramMessage(data);
    const url = 'https://api.telegram.org/bot' + TELEGRAM_BOT_TOKEN + '/sendMessage';

    const response = await fetch(url, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json;charset=utf-8'
      },
      body: JSON.stringify({
        chat_id: TELEGRAM_CHAT_ID,
        text: message,
        parse_mode: 'HTML'
      })
    });

    if (!response.ok) {
      throw new Error('Telegram API error');
    }
  }

  // Функция отправки в удалённое хранилище (замените URL)
  async function sendToRemoteStorage(data) {
    // Удалите следующие 2 строки, если не используете удалённое хранилище
    if (REMOTE_API_ENDPOINT === '{{remote_api_endpoint}}') {
         console.warn('REMOTE_API_ENDPOINT не задан, пропускаю отправку в удалённое хранилище.');
         return;
    }

    const response = await fetch(REMOTE_API_ENDPOINT, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json;charset=utf-8'
      },
      body: JSON.stringify(data)
    });

    if (!response.ok) {
      throw new Error('Remote API error');
    }
  }

  // Функция валидации формы
  function validateForm() {
    let isValid = true;
    const requiredFields = form.querySelectorAll('[required]');

    requiredFields.forEach(field => {
      if (!field.value.trim()) {
        field.style.borderColor = 'var(--primary-color)';
        field.style.boxShadow = '0 0 0 3px rgba(230, 10, 15, 0.1)';
        isValid = false;
      } else {
        field.style.borderColor = '';
        field.style.boxShadow = '';
      }
    });

    // Валидация телефона
    const phone = document.getElementById('phone').value;
    const phoneRegex = /^\+7\s\(\d{3}\)\s\d{3}-\d{2}-\d{2}$/;
    if (phone && !phoneRegex.test(phone)) {
      document.getElementById('phone').style.borderColor = 'var(--primary-color)';
      document.getElementById('phone').style.boxShadow = '0 0 0 3px rgba(230, 10, 15, 0.1)';
      showError("Введите телефон в формате: +7 (999) 123-45-67", false);
      isValid = false;
    }

    return isValid;
  }

  // Функция показа успешного сообщения
  function showSuccess() {
    successMessage.style.display = 'block';
    errorMessage.style.display = 'none';

    setTimeout(() => {
      successMessage.style.display = 'none';
    }, 5000);
  }

  // Функция показа сообщения об ошибке
  function showError(message, autoHide = true) {
    if (message) {
      errorMessage.innerHTML = `<i class="fas fa-exclamation-circle"></i> ${message}`;
    }
    errorMessage.style.display = 'block';
    successMessage.style.display = 'none';

    if (autoHide) {
      setTimeout(() => {
        errorMessage.style.display = 'none';
      }, 5000);
    }
  }

  // Обработчик отправки формы
  if (form) {
    form.addEventListener('submit', async function(e) {
      e.preventDefault();

      if (!validateForm()) {
        return;
      }

      const originalText = submitBtn.innerHTML;
      submitBtn.innerHTML = '<span class="loading"></span> Отправка...';
      submitBtn.disabled = true;
      errorMessage.style.display = 'none';
      successMessage.style.display = 'none';

      const requestData = collectFormData();

      try {
        // Отправляем сначала в удалённое хранилище, потом в Telegram
        await sendToRemoteStorage(requestData);
        await sendToTelegram(requestData);
        showSuccess();

        setTimeout(() => {
          form.reset();
          // Восстанавливаем дату и время по умолчанию
          if (dateField) {
            const today = new Date();
            const defaultDate = new Date(today);
            defaultDate.setDate(defaultDate.getDate() + 2);
            dateField.value = defaultDate.toISOString().split('T')[0];
          }
          if (timeField) {
              timeField.value = '09:00';
          }
        }, 2000);

      } catch (error) {
        console.error(error);
        showError('Ошибка отправки. Пожалуйста, попробуйте еще раз или позвоните нам: +7 (863) 260-03-45');
      } finally {
        submitBtn.innerHTML = originalText;
        submitBtn.disabled = false;
      }
    });
  }

  // Сброс стилей полей при вводе (теперь проверяет существование формы)
  if (form) {
    form.querySelectorAll('input, select, textarea').forEach(field => {
      field.addEventListener('input', function() {
        this.style.borderColor = '';
        this.style.boxShadow = '';
      });
    });
  }
});

</script>
</body>
</html>
```
